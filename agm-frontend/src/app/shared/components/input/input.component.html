<label
  [for]="id"
  class="mb-2 block text-sm font-medium text-gray-500"
  [ngClass]="{ 'text-red-700': control.touched && control.invalid }"
>
  {{ label }}
  @if (
    showRequiredIndicator &&
    (required || control.hasValidator(Validators.required))
  ) {
    <abbr title="required" class="text-red-700">*</abbr>
  }
</label>
<div class="relative">
  <input
    #input
    appInputType
    [id]="id"
    [inputType]="type"
    [name]="name"
    [value]="value"
    [placeholder]="placeholder"
    (focusout)="onTouch()"
    (input)="onChange(input.value)"
    class="block w-full rounded-lg border border-gray-300 bg-gray-50 p-2.5 text-gray-500 focus:border-primary-500 focus:outline-none focus:ring-primary-500 sm:text-sm"
    [ngClass]="{
      'border-red-500 bg-red-50 text-sm text-red-900 placeholder-red-700 focus:border-red-500 focus:ring-red-500':
        control.touched && control.invalid
    }"
    autocomplete="on"
  />
  @if (type === "password") {
    <button
      type="button"
      (click)="togglePasswordVisibility()"
      class="absolute end-0 top-0 rounded-e-md p-3.5"
    >
      <svg
        class="size-3.5 flex-shrink-0 text-gray-500"
        width="24"
        height="24"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
        stroke-linecap="round"
        stroke-linejoin="round"
      >
        <path
          [ngClass]="{ hidden: isPasswordVisible }"
          d="M9.88 9.88a3 3 0 1 0 4.24 4.24"
        ></path>
        <path
          [ngClass]="{ hidden: isPasswordVisible }"
          d="M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68"
        ></path>
        <path
          [ngClass]="{ hidden: isPasswordVisible }"
          d="M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61"
        ></path>
        <line
          [ngClass]="{ hidden: isPasswordVisible }"
          x1="2"
          x2="22"
          y1="2"
          y2="22"
        ></line>
        <path
          [ngClass]="{ hidden: !isPasswordVisible }"
          d="M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z"
        ></path>
        <circle
          [ngClass]="{ hidden: !isPasswordVisible }"
          cx="12"
          cy="12"
          r="3"
        ></circle>
      </svg>
    </button>
  }
</div>
@if (control.touched && control.invalid) {
  <p class="mt-2 text-sm text-red-600">
    <span class="font-medium">
      {{ validationErrorService.getErrorMessage(control.errors) }}
    </span>
  </p>
}
